<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>msWHW project</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Generator" content="iceline webkit 2.1" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="My fourth completed CMS.  This has nice features, and good automation." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="msWHW project">
<meta itemprop="description" content="My fourth completed CMS.  This has nice features, and good automation.">
<!-- meta name="twitter:card" content="summary_large_image" -->
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="msWHW project">
<meta name="twitter:description" content="My fourth completed CMS.  This has nice features, and good automation.">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="msWHW project" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/mswhw-project" />
<meta property="og:description" content="My fourth completed CMS.  This has nice features, and good automation." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="19th of Jul 2022, 10:37:47" />
<meta property="article:modified_time" content="21st of Sep 2020" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "msWHW project",
	"article:published_time":"19th of Jul 2022, 10:37:47", 
    "article:modified_time":"21st of Sep 2020",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<div class="lotsOfWords">
<p>My major artefact at matatiro solutions was a CMS called msWHW.  The name is outside of any branding, and following Unix tradition.  This is a drop in replacement for one that my boss wrote in the preceding months.  This job wasn't covered by an NDA, so I may discuss things.</p>


<h2 class="dontend" id="toc0"> Goals of msWHW <a href="#toc0"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<ol>
    <li>To reduce cost of creating web applications, by providing infrastructure;</li>
    <li>To create widgets for user-interface features above and beyond what the HTML standard and web browser supply;</li>
    <li>To provide management structures for the applications, in terms of URLs and sessions;</li>
    <li>To provide a standard mechanism for things like email templates and dB access, at lower cost than direct PHP manipulation;</li>
</ol>


<h3 class="dontend" id="toc1"> Requirements <a href="#toc1"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<p>The resultant code needs to be able to:</p>

<ol>
    <li>Provide a framework;</li>
    <li>To create a common config format;</li>
    <li>Create forms to support an existing client editable form table-structure;</li>
    <li>Create page content blobs to support an existing client editable table-structure;</li>
    <li>Create notifications according to an existing client-editable error format;</li>
    <li>Create template emails according to an existing client-editable table-structure;</li>
    <li>Support sessions &amp; user identification;</li>
    <li>Create HTML and CSS to pass w3c “accessibility” guidelines;</li>
    <li>Provide JS infrastructure to support all the custom build work as necessary;</li>
    <li>Support FMP dB access;</li>
    <li>Support MySQL access, although this wasn't a big feature;</li>
    <li>Support value list structures which the underlying dB provides;</li>
    <li>Support email notifications;</li>
    <li>Support full xhtml as an output format;</li>
    <li>Automate form input validation;</li>
    <li>Support XML as an output or input format;</li>
    <li>Support SOAP as an output or input format;</li>
    <li>Support JSON as an output format;</li>
    <li>Infrastructure to allow AJAX requests (doesn't need a full webpage in the response); </li>
    <li>Support config driven SQL interaction, as this is faster than to write than more OO code;</li>
    <li>Provide support for datacaches [on selects], as the underlying dB is slow;</li>
    <li>To do activity logging;</li>
    <li>System to be built in PHP5, the version which ships with FMP (5.2 ish);</li>
    <li>...</li>
</ol>


<h2 class="dontend" id="toc2"> Solution <a href="#toc2"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>This title is vague, but this is a synopsis on what I built.  I built a symbol expansion system.   A root request is resolved to some strings, and further list of symbols.  Recursively the other symbols are expanded into their values.  The strings are merged together and returned to the client.   The symbol namespace allows 'symbols' which resolve to strings; 'classes', which obviously resolve to the requested object; and 'actions'.  The latter is for activities such as form handling, or requests for non-strings, such as dB resultsets. The core system provided symbols for all of the formats listed in the requirements.</p>

<p>There may be several implementations of each symbol.  A specific URL may want to have logos on each table row, so override the normal HTML table building structures for example.  Each class needs to elect whether it is relevant to the current URL.  When classes are relevant, the polling function visibleNamepace() returns the active symbols and their weighting.  The highest weighting is used for the current page.</p>

<p>To make data lookup practical URLs are normalised, into lower case, and delimited by URL slashes '/'.  Any IDs are after the page name, and treated extra.  I inherited a page classification system, which split the pages into areas, normally “/noun/verb/id”, sometimes “/noun/preciseNoun/verb/”.</p>

<p>I created a hashmap structure to store setting for each page.  Each of the library classes may be used in each page, but will only be active when listed in the hashmap.  The hashmap also holds configuration for the dB operations, so the page doesn't need to.  The hashmap is indexed via the normalised page name.</p>

<p>In practical terms, the code was split into library and implementation.  'Implementation' is for all the code specific to the pages in the current website, with little re-use potential.  The library directory is a symbolic link to the relevant project location, as a single instance per host.  <br />
Javascript was created by the same page classes, in a second set of symbols ending JavaScript. All the JS symbols are captured; compiled into a single value; then merged into the HTML header.  The form widget classes automatically added JS (via jQuery) for the form items.</p>

<p>As the project was used, it acquired additional widgets for postcodes, and DnD file upload (via AJAX).  There was an inherited scheme for phone numbers (where numbers are a distinct widget interface item), with targeted input validation and a number type select box.  For one project we created lightboxes for popup tabs.</p>

<p>As a comparison with the older CMS library, it is much better OO.  As this is PHP5, one may use exceptions, as a safe form of goto statement.  Much less code was needed for fail conditions.   Exceptions where also used to return the submitted POST data (back with a page) if it proved invalid.  This is one of the features I like best about recent versions of PHP.   I used a class autoloader, making the initial landing page and routing much easier to handle.  I increased the amount of OO structure, increasing testing, decreasing duplicate code.</p>


<h2 class="dontend" id="toc3"> Outcomes <a href="#toc3"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>The additional features and improved ease of use mean the new system is much easier to make websites with.   I am biased, I wrote it; but class variables make the system much better.  The per-page code is generally shorter and more readable.  The output HTML is better quality. <br />
When this was done, a person could add a new form to an existing site by adding data to a table (people like FMP, as it provides tools to do this), updating one config file and hitting publish.  The system would ensure that there was valid HTML, input validation, data capture and recording.  It dynamically created SQL statements to match the table structures. Depending on what was put in the config file, access controls may be applied.  As I added classes, I created unit tests.</p>

<p>I wrote this framework, but it was in place with existing business systems. Agile encourages quick sprints, then refactoring.  This was a large scale refactoring, with architecture improvements as a focus.  My work improved the qualities of the existing process.  I was improving the conceptual cleanness towards an MVC approach (by adding features); but the objective was profitability not theory.</p>


</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="worklog"><a name="adjacent" href=""></a> <p>Some similar articles in worklog </p><div id="groupworklog" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=worklog" title="This article lists all items in worklog group.">All of <br />worklog </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
<legend></legend>
<nav>
<div id="tinyScreen" class="addReading">
<header>
<h1>msWHW project</h1>
</header>
<a class="button" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a> <a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed. "><i class="fa fa-rss" aria-hidden="true" aria-label="Open the RSS for this site" ></i></a>
 Share: <a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-hidden="true" aria-label="Share this article on twitter."></i></a> 
<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in" ><i class="fa fa-linkedin-square" aria-hidden="true" title="Share this article on linked-in" ></i></a>
<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" target="_blank" title="Share this article on reddit." ><i class="fa fa-reddit-square" aria-hidden="true" aria-label="Share this article on reddit." ></i></a>
</div>
<div id="bigScreen" class="row">
<div class="h4_title column"><header><h1>msWHW project</h1></header>


<p id="shareGroup" class="addReading"> 
	<span class="centerBlock">
	<a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> Share: 
	<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a> 
	<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" target="_blank" title="Share this article on reddit" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fmswhw-project" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
&shy; Follow 
	</span>
	<a href="https://twitter.com/@publishowen" class="button" rel="me" title="In theory my publications list, if you prefer tweets." ><i class="fa fa-twitter" aria-hidden="true" aria-label="Look at my published list of articles" ></i>@publishowen</a>
<span class="ultraSkinny"> 
<span>Edited <time datetime="2020-09-21T22:49:43">21st of Sep 2020</time></span>
<span>Created <time datetime="2015-03-03T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" ><strong> &gt;7 Years ago</strong></time> </span>
</span>
</p></div>
<fieldset class="h4_menu column">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu><ul class="h4_lean">
<li class="h4_odd"><a href="#toc0">Goals of msWHW</a></li>
<li><a href="#toc1">Requirements</a></li>
<li class="h4_odd"><a href="#toc2">Solution</a></li>
<li><a href="#toc3">Outcomes</a></li>
</ul>
</menu><br />

</fieldset>
</div>
<menu>
<ul class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class=""><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/translate" id="translateA">Translate <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="#adjacent">Similar articles</a></li>
</ul>
</menu>
</nav>
</fieldset>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> <div class="leftFooter"><a aria-label="Validate CSS" href="http://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
<a href="http://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a></div>
<div class="leftFooter"> 
<a href="http://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >170,000 word sites, so no logo.">Campaign for Plain English</a><br />
My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
</div> Page rendered <time datetime="2022-07-19T10:37:47">19th of Jul 2022, 10:37:47</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2020-09-21T22:49:43">21st of Sep 2020</time>. <br />

Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script src="/asset/ob1.min.js" ></script>

</body>
</html>