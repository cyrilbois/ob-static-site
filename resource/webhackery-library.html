<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>Design notes for Web Hackery.</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Generator" content="iceline webkit 2.1" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="An older CMS with emphasis on user content editing, assembled to short time scales and on older technology.  A success to the user group." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="Design notes for Web Hackery.">
<meta itemprop="description" content="An older CMS with emphasis on user content editing, assembled to short time scales and on older technology.  A success to the user group.">
<!-- meta name="twitter:card" content="summary_large_image" -->
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="Design notes for Web Hackery.">
<meta name="twitter:description" content="An older CMS with emphasis on user content editing, assembled to short time scales and on older technology.  A success to the user group.">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="Design notes for Web Hackery." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/webhackery-library" />
<meta property="og:description" content="An older CMS with emphasis on user content editing, assembled to short time scales and on older technology.  A success to the user group." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="27th of Jul 2022, 13:38:05" />
<meta property="article:modified_time" content="22nd of Sep 2020" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "Design notes for Web Hackery.",
	"article:published_time":"27th of Jul 2022, 13:38:05", 
    "article:modified_time":"22nd of Sep 2020",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<div class="lotsOfWords">
<div class="pullout"><p><strong>WARNING:</strong> This project was completed in 2009, pls reference look to newer projects.  If I took on these requirements today, I would deploy wordpress.  At the time, I wanted to <i>build</i> another project, to gain experience in the project management side of delivering solutions.  My focus was on the requirements tracking, and deliverables.</p>

</div>
<p>Another page renderer.  I have yet to stabilise on a regular system for doing these with, as the result web technology is too old by the time another friend asks for a new one.<br />
As this isn't the first “replace a website” project I have done, I did hold a proper interview to gather the actual requirements for this site, but have lost the documents in a hard-disk failure.</p>


<h3 class="dontend" id="toc0"> Documentation shipped with source bundle. <a href="#toc0"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<p>As stated this was an incomplete code base.   Several external system interfaces where documented (specifically the template language).   I haven't had time to create API docs, this code isn't a completed project.</p>


<h4 class="dontend" id="toc1"> Security overview <a href="#toc1"> <sup><i class="fa fa-link invert" ></i></sup> </a></h4>
<p>I am writing this document primarily as there are tools for editing content, available via the website.  These entirely avoid the normal access privileges.</p>

<p>When completed the website will only have edit privileges via HTTPS.  The usernames are entirely unrelated to any other privileges on the system, so ownership of a password provides no follow through.  There is currently no tracking of IPs etc.  Currently no chroot() is issued, as this is known to kill PHP, this may be revised after testing.</p>

<p>The edit / add content doesn't allow access to directories.  Attempts to put directories in file names are suppressed with addslashes().</p>

<p>No access to PHP (or other languages) is provided, the admin is adding content (ie text). The uploaded content is never used in an executive context (think like Perl taint mode), so is passive.  Currently it would be possible to run SSI directives, but Apache has these disabled, so this would fail.  The user interface constrains large amounts of input, although there is no defined policy for limiting file size.</p>

<p>Any file uploads (say images) are not executed.  The htaccess bars execution of files in the assets or resources directories, which where any uploads would be put.</p>

<p>There is no SQL to be compromised.  The underlying box is secured.  There is no protection against “human layer” semantic attacks, but there never was and never will be (i.e. putting “i fink you stink” in the top of all the pages).</p>


<h4 class="dontend" id="toc2"> Authentication notes and design <a href="#toc2"> <sup><i class="fa fa-link invert" ></i></sup> </a></h4>
<ul class="ulbasic">
    <li class="libasic"><strong> This site has a really basic authentication system. </strong></li>
    <li class="libasic">Visit the friends page and complete the form.</li>
    <li class="libasic">This posts to authentication script, which checks if you are a known user.</li>
    <li class="libasic">On success your privileges are upgraded;</li>
    <li class="libasic">On failure you are bounced back to the form.</li>
    <li class="libasic">The system tracks page hits using sessions.</li>
    <li class="libasic">Sessions are currently tied to COOKIEs, as this looks cleaner than GET arguments.</li>
    <li class="libasic">For tracking purposes, the current level of auth is printed in the menu.</li>
    <li class="libasic"><strong> Theory of the auth system. </strong></li>
    <li class="libasic">Most of the site is accessible without any form of id.</li>
    <li class="libasic">There is an escalating cascade of privileges.</li>
    <li class="libasic">A site admin user is also a friends user, is also a guest user.</li>
    <li class="libasic">As with Unix, the higher privileges have lower ids.</li>
    <li class="libasic">The auth level changes the menu displayed, each page is validated before it is displayed.</li>
    <li class="libasic">Security was not rated as an important feature in the development of this website.</li>
</ul>


</div>

<h3 class="dontend" id="toc3"> Config Notes <a href="#toc3"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<p>As of 2007-02-10 the following config options are available.</p>



<table>
    <tr>
        <th>Name</th>
        <th>Default value</th>
        <th>comment</th>
    </tr>
    <tr>
        <td>url_prefix</td>
        <td>'/tbbs'</td>
        <td>Sets an optional directory etc in all generated local URLs.  You want to be able set this is you have awkward directories/ hosting in a public_html dir etc.</td>
    </tr>
    <tr>
        <td>branding_css</td>
        <td>'/assets/tbbs.css'</td>
        <td>The location of the sites CSS file.  Recommend you leave this setting, and just add content to the file.</td>
    </tr>
    <tr>
        <td>branding_js</td>
        <td>'assets/tbbs.js'</td>
        <td>The location of the sites JS file.  All the random functions in the forms have been dumped in here.  Recommend you leave this setting, and just add content to the file.</td>
    </tr>
    <tr>
        <td>strap_line</td>
        <td>'Titchfield Carnival: 125 years of Tradition'</td>
        <td>The tag that is inserted below every page title.</td>
    </tr>
    <tr>
        <td>default_page</td>
        <td>'news'</td>
        <td>The default page you are bounced to if something blows up.</td>
    </tr>
    <tr>
        <td>site_language</td>
        <td>'en-GB'</td>
        <td>The language the site content is written in.</td>
    </tr>
    <tr>
        <td>self_name</td>
        <td>'the TBBS website'</td>
        <td>In various places the site needs to refer to its self, what should it say?</td>
    </tr>
    <tr>
        <td>email_to</td>
        <td>&lt;deleted to stop spam&gt;'@hotmail.com'</td>
        <td>The email address that mails are forwarded to.</td>
    </tr>
    <tr>
        <td>smtp_servers</td>
        <td>'smtp.vnoc.murphx.net'</td>
        <td>A semi-colon separated list of SMTP servers to talk to, when sending mail.</td>
    </tr>
    <tr>
        <td>allow_dumps</td>
        <td>1</td>
        <td>Whether or not to allow debug dumps.  This logging option will add data to the error stack (see debug).</td>
    </tr>
    <tr>
        <td>show_who</td>
        <td>1</td>
        <td>Whether or not to display the current user account in use.  This is useful for debugging, but you might not like it.</td>
    </tr>
    <tr>
        <td>force_https</td>
        <td>1</td>
        <td>At what level of user does https become forced? use -1 for off.  This is meaningless unless you have a SSL enabled server.</td>
    </tr>
    <tr>
        <td>colon_marker</td>
        <td>'<u>colon</u>'</td>
        <td>What symbol acts as a marker for :.  The real value shouldn't be used, as this is used in the page language and they collide.</td>
    </tr>
    <tr>
        <td>session_name</td>
        <td>'key'</td>
        <td>What the cookie or GET argument is called.  This is specifiable so you can ensure it doesn't collide with another option.</td>
    </tr>
    <tr>
        <td>session_type</td>
        <td>'cookie'</td>
        <td>How are sessions maintained?  You can use cookies or get arguments.</td>
    </tr>
    <tr>
        <td>debug_level</td>
        <td>2</td>
        <td>How many debug symbols to emit.  These are put in the hidden errors list on each page (view source to know).</td>
    </tr>
</table>


<h3 class="dontend" id="toc4"> Web hackery markup notes <a href="#toc4"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>

<h4 class="dontend" id="toc5">Page Header <a href="#toc5"> <sup><i class="fa fa-link invert" ></i></sup> </a></h4>
<p>This defines all the offsets foe the following data.<br />
A colon separated list, terminated by a UNIX newline char.</p>

The header list has seven items:<br />


<table>
    <tr>
        <th>name</th>
        <th>symbol</th>
        <th>comments</th>
    </tr>
    <tr>
        <td>Web hackery version</td>
        <td>vr</td>
        <td>currently must be 1</td>
    </tr>
    <tr>
        <td>HTML title</td>
        <td>ht</td>
        <td>1 or 0 for whether the page has a HTML title</td>
    </tr>
    <tr>
        <td>Page title</td>
        <td>pt</td>
        <td>1 or 0 for whether the page has an “in page” title</td>
    </tr>
    <tr>
        <td>Page Summary</td>
        <td>sm</td>
        <td>1 or 0 for whether the page has a summary (used in links that refer to it.)</td>
    </tr>
    <tr>
        <td>keywords</td>
        <td>kw</td>
        <td>1 or 0 for whether the page has any keywords</td>
    </tr>
    <tr>
        <td>Chunk count</td>
        <td>cc</td>
        <td>how many chunks to expect in the page.</td>
    </tr>
    <tr>
        <td>Auth group</td>
        <td>ag</td>
        <td>what group this page is restricted to.  This is a less then or equals test, so more privileged users automatically have access to low privilege data.</td>
    </tr>
</table>

<ul class="ulbasic">
    <li class="libasic">The chunk count has no default value.  Any data present after the chunk count has been reached will be treated as comments, like the _ _DATA_ _ marker in Perl.</li>
    <li class="libasic">Where items are not specified a default value will be applied.</li>
    <li class="libasic">Other than for keywords, where the tag is omitted.</li>
</ul>

<p>Depending on the values specified in the Offsets line, the next batch of lines are read for the page header info.  If a value is disabled (i.e. 0), it doesn't occupy a line in the Page file; but the default value will be applied. From the above description, you can infer this is up to four lines.</p>

<p>The keywords must currently be specified in the HTML meta tag format (e.g. comma separated), as there is no translation.</p>


<div class="lotsOfWords">

<h4 class="dontend" id="toc6"> Page Chunks <a href="#toc6"> <sup><i class="fa fa-link invert" ></i></sup> </a></h4>
<p>A colon separated list, terminated by a UNIX newline char.<br />
The first char (not colon separated) is the chunk type, and is restricted to the below list.<br />
Successive items (as listed out for each chunk type) are listed below that.</p>

<p><strong>Anchors: a,</strong><br />
0=&gt;displayed text, 1=&gt;href, 2=&gt;title</p>

<p><strong> Anchors: A, </strong><br />
0=&gt;displayed text, 1=&gt;href, 2=&gt;title<br />
Same as above, but different chunk type so the user interface can be made simpler</p>

<p><strong> Paragraphs: p, </strong><br />
0=&gt;displayed text, 1=&gt;class</p>

<p><strong> Images: i, </strong><br />
0=&gt;src, 1=&gt;width, 2=&gt;height 3=&gt;title</p>

<p><strong> headers: h, </strong><br />
0=&gt;content, 1=&gt;class</p>

<p><strong> UL list u, has two forms </strong><br />
opening: 0=&gt;o, 1=&gt;class, optional<br />
closing: 0=&gt;c</p>

<p><strong> HTML table t, has two forms </strong><br />
opening: 0=&gt;o, 1=&gt;class<br />
closing: 0=&gt;c</p>

<p><strong> Form f, has two forms </strong><br />
opening: 0=&gt;o, 1=&gt;form action, 2=&gt;form name 3=&gt;form method, 4=&gt;form encoding<br />
closing: 0=&gt;c</p>

<p><strong> Fieldset F, has two forms, this is called a border in the GUI. </strong><br />
opening: 0=&gt;o, 1=&gt;legend, optional<br />
closing: 0=&gt;c</p>

<p><strong> Raw HTML, r, </strong></p>

<p><strong> Structural DIV, d, has two forms, </strong><br />
opening: 0=&gt;o, 1=&gt;class, 2=&gt;id<br />
closing: 0=&gt;c</p>

<p><strong> Page comment, *, </strong><br />
Not emitted to the HTML page.</p>

<p><strong> HTML comment, - </strong><br />
All of the line is emitted inside a HTML comment tag.</p>

<p><strong> Form row e, </strong><br />
Display name, name, type (defaults to text, if absent), value (defaults to “”), extra settings (directly in HTML)</p>

<p><strong> Form submit s, </strong><br />
Display name (on the button), extra value (HTML, hidden fields etc, optional).<br />
May get revised to have a second version with a back button.</p>


<h3 class="dontend" id="toc7"> Missing features <a href="#toc7"> <sup><i class="fa fa-link invert" ></i></sup> </a></h3>
<ul class="ulbasic">
    <li class="libasic">Spell check</li>
    <li class="libasic">The addslashes() all over the place/ htmlentities</li>
    <li class="libasic">More documentation</li>
    <li class="libasic">Logging/ usage analysis</li>
    <li class="libasic">Correct the .htaccess, so the index.php isn't necessary</li>
    <li class="libasic">Add some security lock downs</li>
    <li class="libasic">Column styles in tables</li>
    <li class="libasic">Possible recursion in data structures for complex bits like tables.  </li>
    <li class="libasic">Some of the add image GUI isn't correct yet.</li>
</ul>


</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="legacy"><a name="adjacent" href=""></a> <p>Some similar articles in legacy </p><div id="grouplegacy" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=legacy" title="This article lists all items in legacy group.">All of <br />legacy </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
<legend></legend>
<nav>
<div id="tinyScreen" class="addReading">
<header>
<h1>Design notes for Web Hackery.</h1>
</header>
<a class="button" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a> <a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed. "><i class="fa fa-rss" aria-hidden="true" aria-label="Open the RSS for this site" ></i></a>
 Share: <a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-hidden="true" aria-label="Share this article on twitter."></i></a> 
<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in" ><i class="fa fa-linkedin-square" aria-hidden="true" title="Share this article on linked-in" ></i></a>
<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" target="_blank" title="Share this article on reddit." ><i class="fa fa-reddit-square" aria-hidden="true" aria-label="Share this article on reddit." ></i></a>
</div>
<div id="bigScreen" class="row">
<div class="h4_title column"><header><h1>Design notes for Web Hackery.</h1></header>


<p id="shareGroup" class="addReading"> 
	<span class="centerBlock">
	<a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> Share: 
	<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a> 
	<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" target="_blank" title="Share this article on reddit" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fwebhackery-library" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
&shy; Follow 
	</span>
	<a href="https://twitter.com/@publishowen" class="button" rel="me" title="In theory my publications list, if you prefer tweets." ><i class="fa fa-twitter" aria-hidden="true" aria-label="Look at my published list of articles" ></i>@publishowen</a>
<span class="ultraSkinny"> 
<span>Edited <time datetime="2020-09-22T23:22:02">22nd of Sep 2020</time></span>
<span>Created <time datetime="2015-03-03T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" ><strong> &gt;7 Years ago</strong></time> </span>
</span>
</p></div>
<fieldset class="h4_menu column">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu><ul class="h4_lean">
<li class="h4_odd"><a href="#toc0">Documentation shipped with source bundle.</a></li>
<li><a href="#toc1">Security overview</a></li>
<li class="h4_odd"><a href="#toc2">Authentication notes and design</a></li>
<li><a href="#toc3">Config Notes</a></li>
<li class="h4_odd"><a href="#toc4">Web hackery markup notes</a></li>
<li><a href="#toc5">Page Header</a></li>
<li class="h4_odd"><a href="#toc6">Page Chunks</a></li>
<li><a href="#toc7">Missing features</a></li>
</ul>
</menu><br />

</fieldset>
</div>
<menu>
<ul class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class=""><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/translate" id="translateA">Translate <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="#adjacent">Similar articles</a></li>
</ul>
</menu>
</nav>
</fieldset>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> <div class="leftFooter"><a aria-label="Validate CSS" href="http://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
<a href="http://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a></div>
<div class="leftFooter"> 
<a href="http://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >170,000 word sites, so no logo.">Campaign for Plain English</a><br />
My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
</div> Page rendered <time datetime="2022-07-27T13:38:05">27th of Jul 2022, 13:38:05</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2020-09-22T23:22:02">22nd of Sep 2020</time>. <br />

Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script defer src="/asset/ob1.min.js" ></script>

</body>
</html>