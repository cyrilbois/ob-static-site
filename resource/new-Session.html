<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>new Session</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="Description of abit of my work to bring my libraries upto professional standards." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="new Session">
<meta itemprop="description" content="Description of abit of my work to bring my libraries upto professional standards.">
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="new Session">
<meta name="twitter:description" content="Description of abit of my work to bring my libraries upto professional standards.">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="new Session" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/new-Session" />
<meta property="og:description" content="Description of abit of my work to bring my libraries upto professional standards." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="3rd of Apr 2023, 17:45:47" />
<meta property="article:modified_time" content="22nd of Dec 2022" />
<link rel="canonical" href="https://owenberesford.me.uk/resource/new-Session" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "new Session",
	"article:published_time":"3rd of Apr 2023, 17:45:47", 
    "article:modified_time":"22nd of Dec 2022",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body" class="annoyingBody">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<div class="lotsOfWords">

<h4 class="dontend" id="toc0"> The architecture of this is correct; but this is 2012 technology <a href="#toc0"> <sup><i class="fa fa-link invert" ></i></sup> </a></h4>
<p>To hide behind the word 'Agile' seems like a excuse for poor practice in many places.   I am a software engineer, I author business systems that stay running as a single process, without leaking memory, or loosing references.  This doesn't apply to webpages.   So I am publishing this article as a sketch on why this is a continuous rewrite project.</p>

<p>The start of the project was entirely focussed on being able to render resources, then having resources.   Initially, I imported an 'archeocode' library, which I had had written a few years earlier.  This code worked without emitting errors, and was probably written on a <strong>2h</strong> budget.  It created a session object, but was a Class providing OO access to a global variable.   Its use case was the constructor which did validation on the session id.  This enabled user sessions to work on top of HTTP (using 'sessions' in the lowercase HCI sense), for conserving user effort; never intended for secure sites.   With the import, to limit data loss, I made this a Singleton.</p>

<p>This software has an organic growth, as far as features for controlling resource rendering are concerned.  In late 2012, I declared freeze on more complex structures in the v1 format, as it was getting unwieldy.   I had had plans for a more intelligent v2 format for some time (as a better model of webpages since 2003), and started work on the rebuild to support this.  Due to other things consuming my time, and a nasty cold in March; this change took ages.   At the end of March, I had completed a list of refactoring, and was using v2 pages.</p>

<p>When logic and structures are more complex, I think unit testing is necessary.  This project is increasingly structured to support security.  When I looked at Session cookies in Firebug, I realised this needed a rebuild.  There had been too many sessions in my /tmp directory, but as they where never used for anything, this wasn't an issue (when there is nothing stored in a session, the ability for malicious people to steal the session means nothing).   I had been releasing, and using; rather than being correct.</p>

<p>So I did a rebuild, the new Session class(es) :</p>

<ul class="ulbasic">
    <li class="libasic">Open a _SESSION in traditional PHP fashion when one is absent/ new;</li>
    <li class="libasic">Creates a default list of items;</li>
    <li class="libasic">For non-page requests (i.e. CSS, PNG or JS) trigger my code that doesn't use session_create, so doesn't write out the pragma caching headers.  These static resources should be cachable;</li>
    <li class="libasic">Rejects requests with old session ids;</li>
    <li class="libasic">Age checks the session itself (rather than just looking at the disk);</li>
    <li class="libasic">Checks the IP of the client;</li>
    <li class="libasic">Maintains a session history as breadcrumbs;</li>
    <li class="libasic">Rebuilds the session id upon permissions change;</li>
    <li class="libasic">Blocks out the session_id function, for a longer more secure version;</li>
    <li class="libasic">Access to non-page assets requires currently requires a valid session id (as these shouldn't be the first HTTP request);</li>
</ul>


</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="engineering"><a name="adjacent" href=""></a> <p>Some similar articles in engineering </p><div id="groupengineering" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=engineering" title="This article lists all items in engineering group.">All of <br />engineering </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
	<legend></legend>
	<nav>

		<div id="navBar" class="row">
			<div class="column">
				<div class="top-bar fullWidth">
					<header><h1>new Session</h1></header>
			    	<p class="bigScreenOnly"> </p>
				</div>
				<div id="shareGroup" class="bibbles row addReading">
					<span class="allButtons"> 
						<a id="siteChartLink" class="button smallScreenOnly" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a>
						<a id="rssLink" href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> 
						<a class="button smallScreenOnly" id="shareMenuTrigger"> Share </a>
						<span class="bigScreenOnly">Share: </span>
						<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fnew-Session" title="Share this resource on your twitter account." target="_blank" class="bigScreenOnly"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a>
						<a href="#" id="mastoTrigger" class="button masto bigScreenOnly" title="Share to *your* mastodon server"  >	<i class="fa fa-mastodon" aria-label="Share this resource on your mastodon account." aria-hidden="true"></i> </a>
						<a href="https://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fnew-Session" target="_blank" title="Share this article on reddit" class="bigScreenOnly" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
						<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fnew-Session" aria-label="share to linked-in" target="_blank" class="bigScreenOnly" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
					</span>

					<span class="ultraSkinny bigScreenOnly"> 
						<span>Edited <time datetime="2022-12-22T22:50:10">22nd of Dec 2022</time>
						</span>
						<span>Created <time datetime="2015-03-03T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" ><strong> &gt;7 Years ago</strong></time> </span>
					</span>

				</div>
			</div>
			<dialog id="popup" class="popup1 bigScreenOnly">
				<form method="dialog" encoding="multipart/form-data" action="." name="mastoSelection"  >
					<label for="mastodonserver">your server: 
						<input id="mastodonserver" max-length="50" --data-url="https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fnew-Session" type="text" value="" placeholder="mastodon.social" />  
					</label> 
					<a id="sendMasto" class="button masto" href="#" title="Share article to *your* mastodon server">Share now</a>
					<a class="button trimmed" id="hideMasto" href="#" title="Close popup"> <i class="fa fa-cancel" aria-hidden="true"></i> </a>
				</form>
			</dialog>

<fieldset class="h4_menu column bigScreenOnly ">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu><ul class="h4_lean">
<li class="h4_odd"><a href="#toc0">The architecture of this is correct; but this is 2012 technology</a></li>
</ul>
</menu><br />

</fieldset>
	</div>
<menu>
<ul class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class="h4_odd"><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/contact-me">Contact me <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="#adjacent">Similar articles</a></li>
</ul>
</menu>
	</nav>
</fieldset>
		</div>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> 
	<div class="leftFooter">
		<a aria-label="Validate CSS" href="https://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
		<a href="https://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a>
	</div>
	<div class="leftFooter"> 
		<a href="https://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >190,000 word sites, so no logo.">Campaign for Plain English</a><br />
		My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
	</div> 
	<p> Page rendered <time datetime="2023-04-03T17:45:47">3rd of Apr 2023, 17:45:47</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2022-12-22T22:50:10">22nd of Dec 2022</time>.
    <p>Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script defer src="/asset/ob1.min.js" ></script>

</body>
</html>