<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>CORS headers</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Generator" content="iceline webkit 2.1" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="An intro for a simple requirement in current webstuff." />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="CORS headers">
<meta itemprop="description" content="An intro for a simple requirement in current webstuff.">
<!-- meta name="twitter:card" content="summary_large_image" -->
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="CORS headers">
<meta name="twitter:description" content="An intro for a simple requirement in current webstuff.">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="CORS headers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/cors-headers" />
<meta property="og:description" content="An intro for a simple requirement in current webstuff." />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="6th of Aug 2022, 18:53:34" />
<meta property="article:modified_time" content="20th of Sep 2020" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "CORS headers",
	"article:published_time":"6th of Aug 2022, 18:53:34", 
    "article:modified_time":"20th of Sep 2020",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<div class="fewWords">

<h2 class="dontend" id="toc0"> Intro <a href="#toc0"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>This is a very basic article, as I haven't published any public articles in quite some time.   This is a really simple theory.   CORS is a lock added to recent browsers to stop badly written or malicious code from breaking servers, and to preserve IP rights.   With older browsers, one may upload a comment to a popular news site; which has embedded JS, the JS is to request to view a resource on a fourth site repeatedly.  A million people view their favourite news, incidentally view the comment.  The fourth server is flooded with all the requests, and will have problems keeping up (i.e. DDOS, <sup><a href="http://www.webopedia.com/TERM/D/DDoS_attack.html" target="_blank">1</a></sup>). <br />
The CORS <sup><a href="http://www.w3.org/TR/cors/" target="_blank">2</a></sup> <sup><a href="https://tools.ietf.org/html/rfc6454" target="_blank">3</a></sup> process uses an OPTIONS HTTP <sup><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html" target="_blank">4</a></sup> request first, to determine if an AJAX request may occur.   Systems need to support the OPTIONS, this more of an issue for REST systems <sup><a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">5</a></sup> which may require more work to add this.  The OPTIONS response looks like a HEAD response <sup><a href="http://zacstewart.com/2012/04/14/http-options-method.html" target="_blank">6</a></sup>.  CORS headers are just more HTTP headers <sup><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS" target="_blank">7</a></sup> <sup><a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing" target="_blank">8</a></sup> <sup><a href="http://www.html5rocks.com/en/tutorials/cors/" target="_blank">9</a></sup>.   The AJAX requests should announce what service they are calling from by using a Origin header <sup><a href="https://tools.ietf.org/html/rfc6454#page-6" target="_blank">10</a></sup>.<br />
In practice the OPTIONS request needs to be implemented fast and light.  The above scenario would still leave the fourth party server processing millions of OPTIONS headers.<br />
UPDATE, more recently browsers are constraining what headers one may set from JS.  The browsers are implementing the following RFC <sup><a href="https://fetch.spec.whatwg.org/#forbidden-header-name" target="_blank">11</a></sup>. Things relating to cookies can be set via cookie <sup><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" target="_blank">12</a></sup>. I normally use a wrapper object <sup><a href="https://www.npmjs.com/package/cookie_js" target="_blank">13</a></sup> to do all the date manipulation etc.  <br />
I started a section marked 'Protocol' to be more articulate, but after I put my references in, this seemed excessive.  Many of the above links are RFCs.</p>


<h2 class="dontend" id="toc1"> Debug <a href="#toc1"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>From my perspective, (generally platform architect, developer and performance adjuster), CORS is another hygiene factor, like using correct line endings.  It is trivial.   It is done once at the start of the project, and isn't time consuming unlike making sites UI feel simple/easy from the users perspective. <br />
To manage CORS practically, run your browser in a web dev mode that reports all errors (e.g. in Firefox, use firebug).  Use all the features of your site.  When there are CORS warnings, you have either got the headers wrong, or they are absent.   There may be more specialised tools, but I haven't needed them yet.  Assuming an average site, the time cost is getting all the third party services setup correctly.</p>

<p>If you need to test anything in detail (i.e. a range of Origin headers), I have been using cURL.  It is trivial to integrate PHP module cURL into a PHPunit or similar tool to have the entire thing as a proper unit-test.   Any fully configurable HTTP client would also work.  When I talk about these, with external people I have been sending NetExport logs (a firebug extension/plugin <sup><a href="https://getfirebug.com/wiki/index.php/Firebug_Extensions#NetExport" target="_blank">14</a></sup>), as its easier to show non-programming support-desk people than a unit-test.</p>


<h2 class="dontend" id="toc2"> Recipes for goal focussed people <a href="#toc2"> <sup><i class="fa fa-link invert" ></i></sup> </a></h2>
<p>To create the headers:</p>

<ul class="ulbasic">
    <li class="libasic">in Symfony2 <sup><a href="http://stackoverflow.com/questions/29975384/symfony2-allow-access-control-allow-origin-with-google-charts" target="_blank">15</a></sup></li>
    <li class="libasic">in Node <sup><a href="http://enable-cors.org/server_expressjs.html" target="_blank">16</a></sup></li>
    <li class="libasic">in Apache <sup><a href="http://stackoverflow.com/questions/14467673/enable-cors-in-htaccess" target="_blank">17</a></sup></li>
    <li class="libasic">in ZF2</li>
    <li class="libasic">in Perl</li>
    <li class="libasic">in Wordpress</li>
</ul>


</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="research,martech"><a name="adjacent" href=""></a> <p>Some similar articles in research </p><div id="groupresearch" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=research" title="This article lists all items in research group.">All of <br />research </a></span> </div><p>Some similar articles in martech </p><div id="groupmartech" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=martech" title="This article lists all items in martech group.">All of <br />martech </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
<legend></legend>
<nav>
<div id="tinyScreen" class="addReading">
<header>
<h1>CORS headers</h1>
</header>
<a class="button" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a> <a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed. "><i class="fa fa-rss" aria-hidden="true" aria-label="Open the RSS for this site" ></i></a>
 Share: <a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-hidden="true" aria-label="Share this article on twitter."></i></a> 
<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in" ><i class="fa fa-linkedin-square" aria-hidden="true" title="Share this article on linked-in" ></i></a>
<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" target="_blank" title="Share this article on reddit." ><i class="fa fa-reddit-square" aria-hidden="true" aria-label="Share this article on reddit." ></i></a>
</div>
<div id="bigScreen" class="row">
<div class="h4_title column"><header><h1>CORS headers</h1></header>


<p id="shareGroup" class="addReading"> 
	<span class="centerBlock">
	<a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> Share: 
	<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a> 
	<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" target="_blank" title="Share this article on reddit" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2Fcors-headers" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
&shy; Follow 
	</span>
	<a href="https://twitter.com/@publishowen" class="button" rel="me" title="In theory my publications list, if you prefer tweets." ><i class="fa fa-twitter" aria-hidden="true" aria-label="Look at my published list of articles" ></i>@publishowen</a>
<span class="ultraSkinny"> 
<span>Edited <time datetime="2020-09-20T23:21:05">20th of Sep 2020</time></span>
<span>Created <time datetime="2015-08-21T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" >21st of Aug 2015</time> </span>
</span>
</p></div>
<fieldset class="h4_menu column">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu><ul class="h4_lean">
<li class="h4_odd"><a href="#toc0">Intro</a></li>
<li><a href="#toc1">Debug</a></li>
<li class="h4_odd"><a href="#toc2">Recipes for goal focussed people</a></li>
</ul>
</menu><br />

</fieldset>
</div>
<menu>
<ul class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class=""><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/translate" id="translateA">Translate <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="#adjacent">Similar articles</a></li>
</ul>
</menu>
</nav>
</fieldset>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> <div class="leftFooter"><a aria-label="Validate CSS" href="http://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
<a href="http://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a></div>
<div class="leftFooter"> 
<a href="http://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >170,000 word sites, so no logo.">Campaign for Plain English</a><br />
My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
</div> Page rendered <time datetime="2022-08-06T18:53:34">6th of Aug 2022, 18:53:34</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2020-09-20T23:21:05">20th of Sep 2020</time>. <br />

Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script defer src="/asset/ob1.min.js" ></script>

</body>
</html>