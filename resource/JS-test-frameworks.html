<!DOCTYPE html>
<html lang="en-GB" class="noJS" itemscope itemtype="http://schema.org/Article">
<head>
<!-- This website is written by a guy who claims to have lots of specialised technical skills, but this website only partially demonstrates them.  This website is a vehicle for about 170,000 words, please read some of them. -->
<title>JS unit-test frameworks</title>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-GB" />
<meta name="Generator" content="iceline webkit 2.1" />
<meta name="Author" content="Owen Beresford" />
<meta name="Description" content="Research into what JS unit-test suites are available" />
<meta name="google-site-verification" content="lSgIe7Nm0H0RYQ2ktQ4vr5Jz0iYGhQd7cTWoVDg3Xss" />
<link href="/asset/favicon-32x32.png" rel="icon" type="image/png" />
<meta itemprop="name" content="JS unit-test frameworks">
<meta itemprop="description" content="Research into what JS unit-test suites are available">
<!-- meta name="twitter:card" content="summary_large_image" -->
<meta name="twitter:site" content="@channelOwen">
<meta name="twitter:title" content="JS unit-test frameworks">
<meta name="twitter:description" content="Research into what JS unit-test suites are available">
<meta name="twitter:creator" content="@channelOwen">
<meta property="og:title" content="JS unit-test frameworks" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://owenberesford.me.uk/resource/JS-test-frameworks" />
<meta property="og:description" content="Research into what JS unit-test suites are available" />
<meta property="og:site_name" content="OwenBeresford's very wordy site" />
<meta property="article:published_time" content="6th of Aug 2022, 18:53:36" />
<meta property="article:modified_time" content="1st of Mar 2022" />
<!-- the below track is just a generic cheese track, but the style fits. progressive + uplifting tone.  I do not own the rights or anything. 
TODO: magic tune selection against some index/DB -->
<meta property="og:audio" content="https://www.youtube.com/watch?v=Brl7WmHDG-E" />

<link rel="stylesheet" href="/asset/ob1.min.css" />
<script type="application/ld+json">
  {
    "@context": "https://ogp.me/ns/article#",
    "@type": "Article",
    "name": "JS unit-test frameworks",
	"article:published_time":"6th of Aug 2022, 18:53:36", 
    "article:modified_time":"1st of Mar 2022",
    "article:section":"technology",

    "author": {
      "@type": "Person",
      "name": "Owen Beresford"
    }
  }
</script>
</head>
<body id="body">
 <div class="h4_page wholeArticle">
  <div class="after_menu articleContent">
   <main id="main">
    <article>
     <div class="blocker">
<div class="lotsOfWords">
<p>If you want to write unit tests on JS classes, sensibly, you need a test framework.  Unit testing quite alot of client-side JS code is hard, as it is quite involved with the DOM or webrowser.   I present a range of options. Please remember <i> 'does it feel intuitive' </i> isn't something that can be put in a unit test.  I am not presenting my own code here, as the current range of tools seem adequate (I have made a few tools previously, but those projects are firmly one of several companies IP.  The publically available tools should be better looked after and have more investment, so represent a better solution.). <br />
<b>I repeat to be clear, this article is about unit testing JS modules, not behaviour testing webpages.</b>  The I am paid for is generally complex enough that one needs to test each module, to reduce later stage costs.  I will write an article on BDD tools later.</p>

<p>Metrics I am using for comparing test frameworks:</p>

<ul class="ulbasic">
    <li class="libasic">what you can test with X;</li>
    <li class="libasic">complexity / time to make stable tests;</li>
    <li class="libasic">ability to integrate with a common CI tool;</li>
    <li class="libasic">ability to output TAP <sup><a href="http://testanything.org/producers.html#javascript" target="_blank">1</a></sup> (for linking into other tools);</li>
    <li class="libasic">fragility of tests;</li>
    <li class="libasic">are tests inside browser, or outside</li>
</ul>

<p>Writing easy-to-test JS is more complex than other languages.  Nicely written Objects ~ JS style ~ do not export many symbols.  Most in-browser code is written a pluginable libraries; and each library must allow that there are other random libraries in use at the same time.  All the in-browser code shares a single namespace <i>per page</i>. It is possible to achieve fake Namespaces, by creating your object as a <i>child object</i> e.g. <i>com.myCorporation.UsefulLibrary</i> won't clash with <i>UsefulLibrary</i> or <i>com.MonopolyCorpPLC.UsefulLibrary</i>. Pls see <sup><a href="https://elegantcode.com/2011/01/26/basic-javascript-part-8-namespaces/" target="_blank">2</a></sup> or others for more detail. Technically this isn't a namespace (compared to other languages).  Another approach is to use SEAF / IIFE ~ there are many abbreviations to this effect ~ more detail at <sup><a href="http://esbueno.noahstokes.com/post/77292606977/self-executing-anonymous-functions-or-how-to-write" target="_blank">3</a></sup> or <sup><a href="http://www.jeffryhouser.com/index.cfm/2015/10/13/Why-use-a-self-executing-function-with-AngularJS" target="_blank">4</a></sup>.  After the widespread adoption of jQuery <sup><a href="http://api.jquery.com/" target="_blank">5</a></sup>, the second approach is really common.<br />
Writing easy-to-test JS is more complex than other languages.  If you don't have access to an objects methods, how can you unit test? How can you see side effects? How can you see Exceptions? Please consider this when designing your architecture . . .</p>

<ul class="ulbasic">
    <li class="libasic">Selenium ~ no demo code practical on this site ~ this is a simulation of a <a href="http://docs.seleniumhq.org/" target="_blank">full webrowser</a>.  Selenium 2 is written in Java.<ul class="ulbasic">
        <li class="libasic">strengths: Massive numbers of features, just like webrowsers. Comprehensive ability to automate any possible action in a webrowser.  Can be used by non-tech people, when used in record mode.  Can easily test in <b>each</b> browser (although they would all need to be installed locally).</li>
        <li class="libasic">weaknesses: Tests cant be quite slow, when simulating mouse movements. Need to manage a JDK. Unless carefully written, scripts will go out-of-date, compared to the target site (i.e. fail to run for nonsense reasons).  It is hard for the Selenium team to support newest CSS, although this wouldn't break JS tests.  This is designed as a <i>site tester</i> not a JS module tester.</li>
    </ul></li>
    <li class="libasic">Jasmine is a unit-tester, similar to any other xUnit tool. It is available from <a href="https://jasmine.github.io/" target="_blank">git</a> with <a href="https://jasmine.github.io/2.4/introduction" target="_blank">docs</a>.  It runs in-browser, or a <a href="https://github.com/jasmine/gulp-jasmine-browser" target="_blank">pretend browser</a> such as gulp; and has bindings for Node, Python and Ruby projects. TODO: add demo.<ul class="ulbasic">
        <li class="libasic">strengths: nice shiny xUnit interface.  Can be run in a <a href="https://edspencer.net/2013/07/28/jasmine-and-jenkins-continuous-integration/" target="_blank">CI platform</a> <sup><a href="http://www.slideshare.net/WapAdmin/drupalcon-2013" target="_blank">6</a></sup> <sup><a href="http://stackoverflow.com/questions/7609223/how-can-we-run-javascript-jasmine-tests-from-jenkins-hudson-without-loading-a" target="_blank">7</a></sup> <sup><a href="https://miparnisariblog.wordpress.com/2016/02/11/how-to-integrate-javascript-test-results-with-jenkins/" target="_blank">8</a></sup>.  It is designed to be easy to read <sup><a href="https://en.wikipedia.org/wiki/Jasmine_%28JavaScript_testing_framework%29" target="_blank">9</a></sup> , and borrows ideas from rspec, and related tools. As part of BDD rather than TDD, it defines the setup()/teardown() pair as beforeEach() and afterEach(); but ignoring the words this has the same effect.  Jasmine can be extended to support TAP with <sup><a href="https://github.com/kozy4324/Jasmine-TAPReporter" target="_blank">10</a></sup></li>
        <li class="libasic">weaknesses:  I think the Jasmine scripts are quite long, apparently so do other developers as there are several script generators eg. <sup><a href="https://www.npmjs.com/package/generator-jasmine-test" target="_blank">11</a></sup>.  Early versions of Jasmine has poor support for async events (which are really common in JS). However this is fixed by now <sup><a href="http://www.htmlgoodies.com/html5/javascript/using-the-done-method-in-your-jasmine-driven-asynchronous-javascript-tests.html" target="_blank">12</a></sup>. </li>
    </ul></li>
    <li class="libasic">Qunit ~ <a class="" href="https://owenberesford.me.uk/resource/qunit-demo#">demo code</a> <sup><a href="http://api.qunitjs.com/" target="_blank">13</a></sup> ~ A small and light unit tester, for JS only (i.e. it can't test CSS or HTML).  I use this for my published jquery modules. <ul class="ulbasic">
        <li class="libasic">strengths: Simple and concise API. As it is just 2 files, it is light in the project repo.  If you are demoing that a JS unit is correct, without concern for a large test suite, it is very nimble.  Good for tests that need to be run a part of the DOM (i.e. you want to see that a particular DOM element is set to a value). Can be combined with <a href="https://github.com/jquery/testswarm" target="_blank">swarm project</a> to run on all webrowsers at once.  Can be made to output TAP, via <a href="https://github.com/twada/qunit-tap" target="_blank">qunit-tap</a>.</li>
        <li class="libasic">weaknesses: This needs to be run in a webrowser. It will output DOM manipulations, as test results.  As such it is less use for integration with a CI/CD tool, like Jenkins. No test ability to test CSS or HTML. </li>
    </ul></li>
    <li class="libasic">Behat/mink/sahi stack ~ this is same idea as Selenuim. I associate it with Symfony, and Behat is written in PHP. Behat implements the same Domain language as Cucumber. The stack can wrap Selenuim2 as a second tech implementation. <a href="https://twitter.com/everzet" target="_blank">Everzet</a> has published some introductory docs for mink <sup><a href="https://media.readthedocs.org/pdf/mink/latest/mink.pdf" target="_blank">14</a></sup>.  These state that one may run JS from inside a PHP test.  The examples that are supplied aren't very useful, but would be easily reproducible.   As this is also a full browser, you can do more complex testing.  Mink is an abstraction layer, to allow more testing tools to be used; Sahi <sup><a href="https://en.wikipedia.org/wiki/Sahi_%28software%29" target="_blank">15</a></sup> is a Java &amp; JS page automator, like Selenuim1.  Sahi acts as an active HTTP proxy. <ul class="ulbasic">
        <li class="libasic">strengths: With respect to testing JS, unit tests can test everything that appears in a browser. Like Selenium, test conditions can be applied against HTML, CSS <sup><a href="http://stackoverflow.com/questions/40804157/how-to-assert-page-tab-window-title-in-behat-mink" target="_blank">16</a></sup> and JS state <sup><a href="https://sahipro.com/features/" target="_blank">17</a></sup>. </li>
        <li class="libasic">weaknesses: If you are one of those people that dislike PHP, its PHP.  The API for JS is less clean, as your basic test is in PHP.  As the test is not native to JS, the event or async stuff is messy.   I can't find a integration between Behat (the test schedular tool) and any TAP.  This is lots of different bits of technology, so tests are more likely to break than a simpler architecture (four languages when using Sahi, PHP for Behat &amp; Mink, Java and JS for Sahi, and C++/C and JS for the browser).</li>
    </ul></li>
    <li class="libasic">Mocha/phantomjs stack, has a full headless-browser browser implemented in JS <a href="https://github.com/ariya/phantomjs" target="_blank">git</a>. Mocha is another BDD spec tool <sup><a href="http://mochajs.org/" target="_blank">18</a></sup>, written in JS.   Moncha is pretty much the same as every other spec tool, see <sup><a href="http://www.redotheweb.com/2013/01/15/functional-testing-for-nodejs-using-mocha-and-zombie-js.html" target="_blank">19</a></sup>, as example.  There is phantomjs <a href="http://phantomjs.org/documentation/" target="_blank">documentation</a>.  As a webrowser, phantomjs isn't a test tool; there are extensions <a href="https://github.com/metafeather/phantomjs-yuitest" target="_blank">git</a> <a href="https://github.com/jamesgpearce/confess" target="_blank">git</a> <sup><a href="http://yslow.org/ruleset-matrix/" target="_blank">20</a></sup> .  Phantomjs does have evaluate(), which is functionally eval().   Twitter use Phantomjs with Qunit <sup><a href="https://scotch.io/tutorials/what-is-phantomjs-and-how-is-it-used" target="_blank">21</a></sup> as a another decision making API.  <ul class="ulbasic">
        <li class="libasic">Strengths: Mocha supports TAP <sup><a href="http://www.macwright.org/2014/03/11/tape-is-cool.html" target="_blank">22</a></sup>.  Phantomjs has close match to Chrome, Safari and a few minor browsers, as it links webkit.  As a node project, Mocha links to common CI tools eg <sup><a href="https://codeforgeek.com/2016/04/continuous-integration-deployment-jenkins-node-js/" target="_blank">23</a></sup>.  For a pure JS unit (no DOM, not much DI), it would be faster to omit phantom i.e. <sup><a href="https://coderwall.com/p/qaebwq/running-mocha-tests-without-a-browser-not-even-phantomjs" target="_blank">24</a></sup> </li>
        <li class="libasic">Weakness: Unfortunately, this is old webkit. Some people (in particular, the Protractor team <sup><a href="http://stackoverflow.com/questions/29425612/what-are-the-pros-and-cons-in-using-phantomjs-natively-instead-of-chrome-through" target="_blank">25</a></sup>) discourage use of Phantomjs.</li>
    </ul></li>
    <li class="libasic">Facebook inc use <a href="https://facebook.github.io/jest/" target="_blank">jest</a> as a test tool.  I think this is mostly BDD, but I didn't get the API to confirm.  UPDATE 2021, I have now used it.  I prefer Mocha at present, but if a react project has been started with Jest; its not worth changing it.</li>
    <li class="libasic">UPDATE: There is a test framework trying to replace Selenium; but written in JS, and only supporting JS.  Cypress <a href="https://github.com/cypress-io/cypress" target="_blank">git</a> claims to be designed for UI testing, integration tests, and unit-tests.  Some links <sup><a href="https://www.cypress.io/how-it-works" target="_blank">26</a></sup> <sup><a href="https://www.producthunt.com/posts/cypress" target="_blank">27</a></sup> this is an advert <sup><a href="https://automationrhapsody.com/cypress-vs-selenium-end-era/" target="_blank">28</a></sup>. Cypress docs claim it integrates with CI <sup><a href="https://docs.cypress.io/guides/guides/continuous-integration.html#Setting-up-CI" target="_blank">29</a></sup>, but as a JS framework, they have never heard of TAP.  The advert link talks about using jQuery selectors, and having a design objective of stable tests.  The massive problem with this is currently it only supports chrome environment; which isn't the browser that normally has issues.  </li>
</ul>

<p>EDIT: I got sent <a href="https://gojko.net/2018/02/25/javascript-testing-tools.html" target="_blank">this article</a> via twitter.  Second comparison on JS testing by a guy trying to test Wordpress properly <sup><a href="https://watirmelon.blog/2015/12/08/comparison-of-javascript-browser-automation-and-test-specification-libraries/" target="_blank">30</a></sup></p>


</div>
</div>
    </article>
   </main>
	<div id="contentGroup" class="adjacentGroup" --data-group="testing"><a name="adjacent" href=""></a> <p>Some similar articles in testing </p><div id="grouptesting" class="adjacentList"><span class="adjacentItem"><a class="button" href="/resource/group-XXX?first=testing" title="This article lists all items in testing group.">All of <br />testing </a></span> </div> </div> 
  </div>
  <fieldset class="outer_menu articleHeader">
<legend></legend>
<nav>
<div id="tinyScreen" class="addReading">
<header>
<h1>JS unit-test frameworks</h1>
</header>
<a class="button" href="/resource/site-chart" title="open a webpage of what articles this site holds.">Sitemap</a> <a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed. "><i class="fa fa-rss" aria-hidden="true" aria-label="Open the RSS for this site" ></i></a>
 Share: <a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-hidden="true" aria-label="Share this article on twitter."></i></a> 
<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in" ><i class="fa fa-linkedin-square" aria-hidden="true" title="Share this article on linked-in" ></i></a>
<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" target="_blank" title="Share this article on reddit." ><i class="fa fa-reddit-square" aria-hidden="true" aria-label="Share this article on reddit." ></i></a>
</div>
<div id="bigScreen" class="row">
<div class="h4_title column"><header><h1>JS unit-test frameworks</h1></header>


<p id="shareGroup" class="addReading"> 
	<span class="centerBlock">
	<a href="https://owenberesford.me.uk/resource/rss" title="Access the sites RSS feed."> <i class="fa fa-rss" aria-label="Open the RSS for this site." aria-hidden="true"></i> </a> Share: 
	<a href="https://twitter.com/intent/tweet?text=I+think+this+is+important+https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" title="Share this resource on your twitter account." target="_blank"> <i class="fa fa-twitter" aria-label="Share this resource on your twitter account." aria-hidden="true"></i></a> 
	<a href="http://www.reddit.com/submit?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" target="_blank" title="Share this article on reddit" ><i aria-label="Share this article on reddit." class="fa fa-reddit-square" aria-hidden="true"></i></a>
	<a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fowenberesford.me.uk%2Fresource%2FJS-test-frameworks" aria-label="share to linked-in" target="_blank" title="Share this article on linked-in." ><i class="fa fa-linkedin-square" aria-hidden="true" aria-label="Share this article on linked-in."></i></a>
&shy; Follow 
	</span>
	<a href="https://twitter.com/@publishowen" class="button" rel="me" title="In theory my publications list, if you prefer tweets." ><i class="fa fa-twitter" aria-hidden="true" aria-label="Look at my published list of articles" ></i>@publishowen</a>
<span class="ultraSkinny"> 
<span>Edited <time datetime="2022-03-01T19:32:27">1st of Mar 2022</time></span>
<span>Created <time datetime="2016-12-29T00:00:00" title="if the value says 03-03-2015; its wrong but that is when this project was moved to the current git project" >29th of Dec 2016</time> </span>
</span>
</p></div>
<fieldset class="h4_menu column">
<legend><a id="pageMenu"><i class="fa fa-ob1burger" aria-hidden="true"></i> </a></legend>
<menu><ul class="h4_lean">
</ul>
</menu><br />

</fieldset>
</div>
<menu>
<ul class="burgerMenu" >
<li class="h4_odd">Additional features</li>
<li class=""><a href="/resource/home"><i class="fa fa-angle-left" aria-hidden="true"></i> Home</a> </li> 
<li class=""><a href="/resource/search">Search <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="/resource/appearance">Appearance <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class=""><a href="/resource/translate" id="translateA">Translate <i class="fa fa-angle-right" aria-hidden="true"></i></a></li>
<li class="h4_odd"><a href="#adjacent">Similar articles</a></li>
</ul>
</menu>
</nav>
</fieldset>
 </div>
 <br class="blocker" />
 <div id="biblio"></div>
 <br class="blocker" />
 <footer>
  <div class="h4_footer"> <div class="leftFooter"><a aria-label="Validate CSS" href="http://jigsaw.w3.org/css-validator/check/referer"><img src="/asset/validCSS.png" alt="Valid CSS!" /></a> 
<a href="http://validator.w3.org/check?uri=referer" aria-label="Validate HTML"><img src="/asset/valid-xhtml10.png" alt="Valid XHTML 1.0 Transitional, unfortunately no HTML5 available" /></a></div>
<div class="leftFooter"> 
<a href="http://www.plainenglish.co.uk/services/webcheck.html" target="_blank" title="They, er, don't have a service for >170,000 word sites, so no logo.">Campaign for Plain English</a><br />
My profile: <a href="https://www.linkedin.com/in/owen-beresford-bb6ab030/" target="_blank" aria-label="my linked-in" title="Load my linked-in profile" ><i style="font-size:200%; margin-bottom:0px;" class="fa fa-linkedin-square" aria-hidden="true" aria-label="Open my linked in profile" ></i></a>
</div> Page rendered <time datetime="2022-08-06T18:53:36">6th of Aug 2022, 18:53:36</time>, Copyright &copy; 2022 Owen Beresford, <a class="" href="https://owenberesford.me.uk/resource/contact-me#">contact me</a>.  Last modified <time datetime="2022-03-01T19:32:27">1st of Mar 2022</time>. <br />

Read the generous <a rel="license" href="https://owenberesford.me.uk/resource/licence#" title="Load the license term; but not that interesting">licence terms</a>, if you feel the need, there is a <a href="https://owenberesford.me.uk/resource/privacy#" title="Load the privacy terms" >privacy here</a>.    View the <a href="https://owenberesford.me.uk/resource/site-chart#" title="Load a page showing all the articles on this site">site map</a>.  <a href="#pageMenu">Jump to menu</a>
</div>
</footer>
<script defer src="/asset/ob1.min.js" ></script>

</body>
</html>